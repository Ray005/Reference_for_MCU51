C51 COMPILER V9.01   MAIN                                                                  01/06/2021 19:59:50 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          /**************************************************************************************
   2          实验现象：下载程序后"LED&交通灯模块"的D1-D8呈现流水灯效果
   3          接线说明： 单片机-->LED&交通灯模块(具体接线图可见开发攻略对应实验的“实验现象”章节)
   4                 P00-->D1
   5                 P01-->D2 
   6                 ...
   7                 P07-->D8
   8          注意事项：                                          
   9          ***************************************************************************************/
  10          
  11          #include "reg52.h"       //此文件中定义了单片机的一些特殊功能寄存器
  12          #include<intrins.h>   //因为要用到左右移函数，所以加入这个头文件
  13          
  14          typedef unsigned int u16;   //对数据类型进行声明定义
  15          typedef unsigned char u8;
  16          
  17          #define led P2     //将P2口定义为led 后面就可以使用led代替P2口
  18          
  19          /*******************************************************************************
  20          * 函 数 名         : delay
  21          * 函数功能       : 延时函数，i=1时，大约延时10us
  22          *******************************************************************************/
  23          void delay(u16 i)
  24          {
  25   1        while(i--); 
  26   1      }
  27          
  28          /*******************************************************************************
  29          * 函 数 名       : main
  30          * 函数功能     : 主函数
  31          * 输    入       : 无
  32          * 输    出       : 无
  33          *******************************************************************************/
  34          void main()
  35          {
  36   1        u8 i;
  37   1        led=~0x01;
  38   1        P0 = 0;
  39   1        delay(50000); //大约延时450ms 
  40   1        while(1)
  41   1        { 
  42   2          for(i=0;i<8;i++)
  43   2          {
  44   3            P2=~(0x01<<i);   //将1右移i位，然后将结果赋值到P2口
  45   3            delay(50000); //大约延时450ms
  46   3          }
  47   2      
  48   2          
  49   2      /*    for(i=0;i<7;i++)   //将led左移一位
  50   2          {
  51   2            led=_crol_(led,1);
  52   2            delay(50000); //大约延时450ms 
  53   2          }
  54   2          for(i=0;i<7;i++)  //将led右移一位
  55   2          {
C51 COMPILER V9.01   MAIN                                                                  01/06/2021 19:59:50 PAGE 2   

  56   2            led=_cror_(led,1);
  57   2            delay(50000); //大约延时450ms 
  58   2          }
  59   2      */
  60   2        }   
  61   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     53    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
